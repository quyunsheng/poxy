<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>中国环氧树脂网</title>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/shop.css" />
		<link rel="stylesheet" type="text/css" href="css/footer.css"/>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/phone.js" type="text/javascript" charset="utf-8"></script>

		<script src="js/axios.min.js"></script>
		<script src="js/request.js"></script>
		<script src="js/qs.min.js"></script>
		<script src="js/ljj-js/urls.js"></script>
		<script src="js/vue.min.js"></script>
		<style type="text/css">
			.title {
				color: rgb(255, 255, 255);
				margin: auto;
				position: absolute;
				left: 50%;
				margin-left: -28px;
				top: 20px;
			}
			.commodity-list{
				height: 3.6rem;
			}
			.commodity-list h4{
				height: 0.8rem;
				margin-bottom: 0;
			}
		</style>
	</head>
	<body style="background-color: #f6f6f6;padding: 1.16rem 0 1.5rem 0;">
		<div id="shop">
			<div id="index">
				<div class="lwxq_title">
					<div class="lwxq_title_txt"><a href="javascript:history.back(-1)"><img src="img/fang-img/Left.png"></a> 
						<span class="title">合作企业</span> 
						<a href="#" class="delateSome hidden"><img src="img/q-img/navBtn.png"></a>
					</div>
				</div>
				<div class="shopCont">
					<div class="clearfix">
						<a class="commodity-list" v-for="item in remShops" @click="shopDetail(item.id)">
							<div class="commodity-img">
								<img :src="item.logo">
							</div>
							<h4>{{item.name}}</h4>
						</a>
					</div>
				</div>
			</div>
			<div class="footerpage"></div>
		</div>
		<script type="text/javascript">
			$(function() {
				$(".footerpage").load("footer.html");
			});
			new Vue({
				el: '#shop',
				data() {
					return {
						getUsers: '',
						token: '',
						remShops: [],
						//分页容器
						pageSize: '',
					}
				},
				methods: {
					// 点击验证是否登录
					uOnLine: function(url) {
						this.token = localStorage.getItem(tkn);
						if (this.token == '' || this.token != null || this.token == 'null' || this.token == 'undefined' || this.token ==
							undefined) {
							window.location.href = 'i-login.html';
							return false;
						}
						window.location.href = url;
					},
					// 获取用户信息
					getPeople: function() {
						this.token = localStorage.getItem(tkn);
						axios.get(allUrl.getUser, {
							headers: {
								Authorization: this.token,
								Accept: 'application/json',
							},
						}).then((response) => {
							if (response != "" && response.code == 0) {
								this.getUsers = response.data;
							} else if (response.code == 7) {
								window.localStorage.removeItem(tkn);
								alert('登录失效，请重新登录！')
								window.location.href = 'i-login.html';
							}
						})
					},
					// 获取推荐商铺
					getShops: function() {
						axios.get(allUrl.bestShops,{
							params:{
								pageSize:0
							}
						}).then((response) => {
							if (response != "" && response.code == 0) {
								this.remShops = response.data
							} else {
								alert(response.message)
							}
						})
					},
					// 跳转店铺页
					shopDetail:function(goShopId){
						localStorage.setItem(shopsId,goShopId);
						// window.location.href = 'shangJia.html'
						window.location.href = 'shangJia.html?id='+ goShopId;
					},
					lookMore: function() {
						this.page += this.page
						this.getGoodList();
					}
				},
				mounted: function() {
					this.token = localStorage.getItem(tkn);
					if (this.token && this.token != 'null' && this.token != 'undefined') {
						this.getPeople();
					}
					this.getShops();
				}
			})
		</script>
	</body>
</html>
