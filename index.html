<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>中国环氧树脂网</title>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/index-duan.css" />
		<link rel="stylesheet" type="text/css" href="css/swiper.min.css" />
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
				window.location.href = "phone/phone.html";
			}
		</script>
		<style type="text/css">
			.merchant-top>span {
				display: inline-block;
				width: 117px;
				display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-line-clamp: 1;
				overflow: hidden;
			}

			[v-cloak] {
				display: none;
			}

			.good_nav {
				display: block;
			}
		</style>
	</head>
	<body>

		<div class="headerpage"></div>
		<div id="indexBox" v-cloak>
			<div class="index-top" id="goTop">
				<div class="index-swiper swiper-container">
					<div class="swiper-wrapper">
						<div class="swiper-slide swiper-slide1" v-for="item in pageBanner" :style="{'backgroundImage': 'url(' + item.cover + ')'}"></div>
					</div>
					<div class="pagination"></div>
				</div>
				<div class="main-width swiper-right">
					<div class="swiper-news" style="overflow: hidden;height: 145px">
						<div class="swiper-news-tit clearfix">
							<img height="20" src="images/icon-voice.png">
							<span>消息</span>
							<a href="notice.html">更多&gt;&gt;</a>
						</div>
						<div v-for="(item,index) in bannerArticleList" v-if="index<3">
							<p class="swiper-news-list" @click="commentList(item.id)"><i>[{{item.articleTypeName}}]</i>{{item.title}}</p>
						</div>
					</div>
					<div v-if="bannerArticleList.length>3" class="swiper-news-img" @click="commentList(bannerArticleList[3].id)">
						<img :src="bannerArticleList[3].cover">
					</div>
				</div>
			</div>
			<div class="index-flow">
				<div class="main-width">
					<div class="">
						<h2>购买流程</h2>
						<p>Purchase process</p>
					</div>
					<div class="index-flow-list">
						<img src="images/flow1.png">
						客户下单
					</div>
					<div class="index-flow-list">
						<img src="images/flow2.png">
						支付货款
					</div>
					<div class="index-flow-list">
						<img src="images/flow3.png">
						物流发货
					</div>
					<div class="index-flow-list">
						<img src="images/flow4.png">
						开具发票
					</div>
				</div>
			</div>
			<div class="main-width">
				<p class="main-tit tit-bg">
					<img src="images/icon-tit.png">
					合作企业
					<a href="shop-list.html" class="main-more">
						<span>+ 查看更多</span>
					</a>
				</p>
				<ul class="cooperative clearfix">
					<li v-for="item in companyList">
						<img :src="item.logo">
					</li>
				</ul>
			</div>
			<div class="main-width" v-for="list in goodList">
				<p class="main-tit tit-bg">
					<img src="images/icon-tit.png">
					{{list.title}}
					<a @click="storeDetail(list.classifyCode,list.title)" class="main-more">
						<span>+ 查看更多</span>
					</a>
				</p>
				<div class="jzBox">
					<div>
						<img :src="list.cover" width="188" height="620" alt="">
					</div>
					<ul class="jzBox-last">
						<li v-for="(item,index) in list.productList" v-if="index<8" @click="goodDetail(item.id,item.classifyCode)">
							<a>
								<div class="index-img">
									<img height="100%" :src="item.logo">
								</div>
								<h2 class="index-h2">{{item.name}}</h2>
								<div class="index-tag">
									<span>标签</span>
								</div>
								<p class="index-pay">￥<i>{{item.price}}</i></p>
								<span class="buyBtn">预约下单</span>
							</a>
						</li>
					</ul>
				</div>
				<img width="100%" style="margin: 30px 0;" src="images/021.png">
			</div>

			<div class="footerpage"></div>
			<script src="js/swiper.min.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/qs.min.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/axios.min.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/request.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/qurls.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/durl.js" type="text/javascript" charset="utf-8"></script>
			<script type="text/javascript">
				new Vue({
					el: '#indexBox',
					data() {
						return {
							pageBanner: '', //banner
							goodList:[],
							companyList:[],//推荐企业
							// 新闻
							typeId: "eb186ab5a3b94ae998675d5f3498070d",
							zxId: "93ee4d6f1ac34297b120fb6864155e97",
							newsAll: "",
							newsTj: "",
							/* banner 文章列表 */
							bannerArticleList: '',
							bannerGaoList: '',
							step: 1,

							advertisId: '64560152089345f48934587a4bd9ca8b',
							advertising: '', //广告
						}
					},
					methods: {
						// 获取banner
						gatBanner: function() {
							axios.get(allUrl.getAnnunce, {
								params: {
									typeId: "1d604de8a1fa48e4b3db7bbeb2f5f028",
									recommend:true
								}
							}).then((result) => {
								if (result != "" && result.code == 0) {
									this.pageBanner = result.data
									this.$nextTick(() => {
										this.bannerSwiper();
									})
								}
							})
						},
						//企业
						getCompanyList: function() {
							axios.get(allUrl.bestCompany, {
								params: {
									recommend:true,
									pageNum: 1,
									pageSize: 12,
								}
							}).then((response) => {
								if (response != "" && response.code == 0) {
									this.companyList = response.data
								}
							})
						},
						/* 公告消息 */
						bannerArticle: function() {
							axios.get(allUrl.getAnnunce, {
								params: {
									typeId: 'cb5f2bd0599f47088a119fe899213e2f',
									recommend:true
								}
							}).then((response) => {
								if (response != "" && response.code == 0) {
									this.bannerArticleList = response.data
								}
							})
						},
						//首页商品
						getIndexsList: function() {
							axios.get(allUrl.classifyProduct, {
								params: {
									pageNum: 1,
									pageSize: 10,
								}
							}).then((response) => {
								if (response != "" && response.code == 0) {
									this.goodList = response.data.data
								}
							})
						},
						// 跳转商品详情
						goodDetail: function(id, code) {
							window.location.href = 'good-detail.html?id='+id+'&code='+code
						},
						// 跳转商品列表
						storeDetail: function(code, goStoreName) {
							localStorage.setItem(classifyCode, code);
							localStorage.setItem(storeName, goStoreName);
							window.location.href = 'good-list.html'
						},
						// 获取广告
						getAdvertise: function() {
							axios.get(allUrl.article_list, {
								params: {
									articleSubTypeId: this.advertisId,
									pageNum: 1
								}
							}).then((result) => {
								if (result != "" && result.code == 0) {
									this.advertising = result.data.data
								}
							})
						},
						// 获取推荐新闻
						newsTjGet: function() {
							axios.get(allUrl.article_list, {
								params: {
									articleTypeId: this.typeId,
									pageNum: 1,
									recommend: 1
								}
							}).then((result) => {
								if (result != "" && result.code == 0) {
									this.newsTj = result.data.data
								}
							}).catch((error) => {
								//alert(error.message)
							})
						},
						// 跳转新闻详情
						commentList: function(goCommentId) {
							localStorage.setItem(workId, goCommentId);
							window.location.href = 'news-detail.html'
						},
						// 获取所有劳务信息
						bannerSwiper: function() {
							// 首页banner轮播
							const headSwiper = new Swiper('.index-swiper', {
								slidesPerView: 1,
								autoplay: {
									delay: 2000,
									disableOnInteraction: false,
								},
								pagination: {
									el: '.pagination',
									clickable: true,
								},
								loop: true,
								observer: true, //修改swiper自己或子元素时，自动初始化swiper
								observeParents: true //修改swiper的父元素时，自动初始化swiper
							});
						},
					},
					mounted() {
						$(".headerpage").load("header.html");
						$(".footerpage").load("footer.html?vid=0717");
						this.getIndexsList()
						this.getCompanyList()
						this.bannerArticle() //公告
						this.gatBanner()
					}
				})
			</script>
	</body>
</html>
